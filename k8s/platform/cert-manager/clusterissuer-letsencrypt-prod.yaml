# Let's Encrypt Production ClusterIssuer
#
# Use this issuer after verifying staging works.
# Production certificates are trusted by all browsers.
#
# Rate limits for production:
# - 50 certificates per registered domain per week
# - 5 duplicate certificates per week
# - Be careful not to hit these limits!
#
# Always test with staging first!

---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-prod
  labels:
    app: cert-manager
    environment: production
spec:
  acme:
    # Let's Encrypt production server
    server: https://acme-v02.api.letsencrypt.org/directory

    # Email for Let's Encrypt account (important for renewal notifications)
    # TODO: Replace with your actual email
    email: YOUR_EMAIL@example.com

    # Secret to store ACME account private key
    privateKeySecretRef:
      name: letsencrypt-prod

    # DNS-01 challenge solver using Cloudflare
    solvers:
    - dns01:
        cloudflare:
          # Cloudflare API token secret reference
          apiTokenSecretRef:
            name: cloudflare-api-token
            key: api-token

      # This solver applies to yourdomain.com and its subdomains
      selector:
        dnsZones:
        - yourdomain.com
